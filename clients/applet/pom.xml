<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
	 xmlns="http://maven.apache.org/POM/4.0.0"
	 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>

    <parent>
	<groupId>org.openecard.client</groupId>
	<artifactId>clients</artifactId>
	<version>1.0.0-pre3-SNAPSHOT</version>
    </parent>

    <groupId>org.openecard.client.clients</groupId>
    <artifactId>applet</artifactId>
    <name>Applet</name>
    <packaging>signed-packed-jar</packaging>

    <profiles>
	<profile>
	    <id>trace-applet</id>
	    <dependencies>
		<dependency>
		    <groupId>org.slf4j</groupId>
		    <artifactId>slf4j-ext</artifactId>
		</dependency>
	    </dependencies>
	</profile>
    </profiles>

    <build>
	<pluginManagement>
	    <plugins>
		<plugin>
		    <groupId>org.apache.maven.plugins</groupId>
		    <artifactId>maven-shade-plugin</artifactId>
		    <version>1.6</version>
		    <configuration>
			<!--
			    The reduced pom excludes transitive dependencies of test scope
			    libraries, eg. com.beust.jcommander from org.testng.testng, so
			    a subsequent test run (eg. started by cobertura) will miss some
			    dependencies
			-->
			<createDependencyReducedPom>false</createDependencyReducedPom>
			<filters>
			    <filter>
				<artifact>*:*</artifact>
				<excludes>
				    <exclude>META-INF/**/pom.xml</exclude>
				    <exclude>META-INF/**/pom.properties</exclude>
				</excludes>
			    </filter>
			</filters>
		    </configuration>
		</plugin>
		<plugin>
		    <groupId>org.apache.maven.plugins</groupId>
		    <artifactId>maven-jar-plugin</artifactId>
		    <version>2.4</version>
		    <configuration>
			<keystore>src/package/resources/keystore/keystore.jks</keystore>
			<storepass>DgN1CB0Ywy2W</storepass>
			<alias>applet</alias>
			<keypass>bHrjoV3j7ucq</keypass>
			<verify>true</verify>
			<jarPath>${project.build.directory}/${project.build.FinalName}.jar</jarPath>
		    </configuration>
		</plugin>
	    </plugins>
	</pluginManagement>

	<plugins>
	    <plugin>
		<groupId>de.ecsec.maven.plugins</groupId>
		<artifactId>maven-pack200-plugin</artifactId>
		<version>1.0.1</version>
		<configuration>
		    <processMainArtifact>true</processMainArtifact>
		    <effort>9</effort>
		    <deflateHint>true</deflateHint>
		    <!--<keepFileOrder>true</keepFileOrder>-->
		    <stripCodeAttributes>
			<!-- Comment the following lines to debug the applet -->
			<param>SourceFile</param>
			<param>LineNumberTable</param>
			<param>LocalVariableTable</param>
			<param>LocalVariableTypeTable</param>
		    </stripCodeAttributes>
		</configuration>
		<extensions>true</extensions>
	    </plugin>

	<!-- Disabled until configured correctly -->
	<!--     <plugin> -->
	<!--         <groupId>com.github.wvengen</groupId> -->
	<!--         <artifactId>proguard-maven-plugin</artifactId> -->
	<!--         <version>2.0.5</version> -->
	<!--         <executions> -->
	<!-- 	    <execution> -->
	<!-- 		<phase>package</phase> -->
	<!-- 		<goals><goal>proguard</goal></goals> -->
	<!-- 	    </execution> -->
	<!-- 	</executions> -->
	<!--         <configuration> -->
	<!-- 	    <proguardVersion>4.7</proguardVersion> -->
	<!-- 	    <includeDependency>false</includeDependency> -->
	<!-- 	    <options> -->
			<!-- don't warn about these packages not being found, because they are not needed anyways -->
			<!-- <option>-dontwarn org.bouncycastle.**</option> -->
			<!-- <option>-dontwarn junit.**</option> -->
			<!-- general options -->
			<!-- <option>-allowaccessmodification</option> -->
			<!-- tell proguard which classes/methods to keep untouched -->
	<!-- 		<option>-keep public class * extends java.applet.Applet { *; }</option> -->
	<!-- 	    </options> -->
	<!-- 	    <libs> -->
	<!-- 		<lib>${java.home}/lib/rt.jar</lib> -->
	<!-- 		<lib>${java.home}/lib/jce.jar</lib> -->
	<!-- 	    </libs> -->
	<!-- 	</configuration> -->
	<!--         <dependencies> -->
	<!-- 	    <dependency> -->
	<!-- 		<groupId>net.sf.proguard</groupId> -->
	<!-- 		<artifactId>proguard-base</artifactId> -->
	<!-- 		<version>4.7</version> -->
	<!-- 		<scope>runtime</scope> -->
	<!-- 	    </dependency> -->
	<!-- 	</dependencies> -->
	<!--     </plugin> -->
	</plugins>
    </build>

    <dependencies>
	<dependency>
	    <groupId>org.openecard.client</groupId>
	    <artifactId>common</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.ifd</groupId>
	    <artifactId>ifd-core</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.ifd.scio-backend</groupId>
	    <artifactId>pcsc</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.gui</groupId>
	    <artifactId>swing</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.sal</groupId>
	    <artifactId>tiny-sal</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.management</groupId>
	    <artifactId>tiny-management</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.wsdef</groupId>
	    <artifactId>wsdef-client</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.wsdef</groupId>
	    <artifactId>jaxb-marshaller</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client</groupId>
	    <artifactId>event-manager</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.control.bindings</groupId>
	    <artifactId>http</artifactId>
	    <version>${project.version}</version>
	</dependency>
        <dependency>
            <groupId>org.openecard.client.control.bindings</groupId>
            <artifactId>javascript</artifactId>
            <version>${project.version}</version>
        </dependency>
	<dependency>
	    <groupId>org.openecard.client.transport</groupId>
	    <artifactId>dispatcher</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.transport</groupId>
	    <artifactId>paos</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.transport</groupId>
	    <artifactId>tls</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.sal.protocols</groupId>
	    <artifactId>eac</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.openecard.client.ifd.protocols</groupId>
	    <artifactId>pace</artifactId>
	    <version>${project.version}</version>
	</dependency>
	<dependency>
	    <groupId>org.slf4j</groupId>
	    <artifactId>slf4j-jdk14</artifactId>
	</dependency>
	<dependency>
	    <groupId>openjdk</groupId>
	    <artifactId>java-plugin</artifactId>
	    <version>1.6.0.26</version>
	    <scope>provided</scope>
	</dependency>
    </dependencies>

</project>
